{% extends 'blog/base.html' %}
{% block title %}Explore{% endblock %}
{% block content %}

<div class="container my-5">

  <div class="text-center mb-5">
    <h1 class="text-success fw-bold mb-2">üåé Explore Blogs</h1>
    <p class="text-muted">Discover amazing stories and insights from our community</p>
  </div>


  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 col-md-10">
      <form method="get" class="d-flex shadow-sm" style="border-radius: 50px; overflow: hidden;">
        <input 
          type="text" 
          name="q" 
          value="{{ q }}" 
          class="form-control border-0 px-4" 
          placeholder="üîç Search for blogs, topics, authors..."
          style="border-radius: 50px 0 0 50px; padding: 15px 25px;"
        >
        <button class="btn btn-success px-5" style="border-radius: 0 50px 50px 0;">
          Search
        </button>
      </form>
    </div>
  </div>


  <div class="row g-4">
    {% for post in posts %}
    <div class="col-lg-6 col-md-12">
      <div class="card h-100 shadow-sm border-0 hover-card" style="border-radius: 20px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease;">
        
        {% if post.image %}
        <div style="width: 100%; height: 280px; overflow: hidden; position: relative;">
          <img 
            src="{{ post.image.url }}" 
            alt="{{ post.title }}" 
            style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;"
            class="post-image"
          >
          <div style="position: absolute; top: 15px; right: 15px;">
            <span class="badge bg-success px-3 py-2" style="border-radius: 20px; font-size: 0.85rem;">
              {{ post.date_posted|date:"M d" }}
            </span>
          </div>
        </div>
        {% endif %}
        
        <div class="card-body p-4 d-flex flex-column">
          <div class="mb-3">
            <span class="badge bg-light text-success px-3 py-2" style="border-radius: 15px; font-weight: 500;">
              üìù Blog Post
            </span>
          </div>
          
          <h4 class="fw-bold text-dark mb-3" style="line-height: 1.4;">
            {{ post.title }}
          </h4>
          
          <div class="d-flex align-items-center mb-3">
            <div class="bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-2" 
                 style="width: 40px; height: 40px; font-weight: bold;">
              {{ post.author.first_name|first }}
            </div>
            <div>
              <p class="mb-0 fw-semibold text-dark" style="font-size: 0.95rem;">
                {{ post.author.first_name }} {{ post.author.last_name }}
              </p>
              <p class="mb-0 text-muted" style="font-size: 0.85rem;">
                {{ post.date_posted|date:"F d, Y" }}
              </p>
            </div>
          </div>
          
          <p class="text-muted mb-4 flex-grow-1" style="line-height: 1.7; font-size: 0.95rem;">
            {{ post.content|truncatechars:180 }}
          </p>
          
          <a href="{% url 'post_detail' slug=post.slug %}" 
             class="btn btn-success w-100" 
             style="border-radius: 12px; padding: 12px; font-weight: 500;">
            Read More ‚Üí
          </a>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="text-center py-5">
        <div class="mb-3" style="font-size: 4rem;">üì≠</div>
        <h4 class="text-muted">No blogs found</h4>
        <p class="text-muted">Try searching with different keywords</p>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<style>
.hover-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.15) !important;
}

.hover-card:hover .post-image {
  transform: scale(1.05);
}

.form-control:focus {
  box-shadow: 0 0 0 0.2rem rgba(25, 135, 84, 0.25);
  border-color: #198754;
}
</style>

{% endblock %}